fragment SettingsInfo on Setting {
  nodeId
  registrationAllowed
  registrationPasswordAllowed
  style
  discordIntegrationEnabled
  oauth2Enabled
}

fragment AdminSettingsInfo on Setting {
  nodeId
  ...SettingsInfo
  registrationPassword
  registrationDefaultRole
  icalPassword
}

fragment OAuth2SettingsFragment on OAuth2Settings {
  clientId
  scope
  issuer
  authorizationEndpoint
}

query getSettings {
  settings {
    nodes {
      ...SettingsInfo
    }
  }
}

query getOAuth2Settings {
  oauth2Settings {
    ...OAuth2SettingsFragment
  }
}

query getIcalPassword {
  settings {
    nodes {
      nodeId
      icalPassword
    }
  }
}

query getAdminSettings {
  settings {
    nodes {
      ...AdminSettingsInfo
    }
  }
}
mutation updateSettings($nodeId: ID!, $patch: SettingPatch!) {
  updateSettingByNodeId(input: { nodeId: $nodeId, patch: $patch }) {
    setting {
      ...AdminSettingsInfo
    }
  }
}
