{"version":3,"sources":["../src/swallowError.js"],"names":["debugWarn","swallowError","e","enabled","console","warn","errorSnippet","toString","String","replace","substr","trim"],"mappings":";;;;;;;AACA;;;;AAEA,MAAMA,SAAS,GAAG,oBAAa,qBAAb,CAAlB;;AAEe,SAASC,YAAT,CAAsBC,CAAtB,EAAsC;AACnD;AACA;AACA,MAAIF,SAAS,CAACG,OAAd,EAAuB;AACrB;AACAC,IAAAA,OAAO,CAACC,IAAR,CAAc,6BAAd;AACAL,IAAAA,SAAS,CAACE,CAAD,CAAT;AACD,GAJD,MAIO;AACL,UAAMI,YAAY,GAChBJ,CAAC,IAAI,OAAOA,CAAC,CAACK,QAAT,KAAsB,UAA3B,GACIC,MAAM,CAACN,CAAD,CAAN,CAAUO,OAAV,CAAkB,OAAlB,EAA2B,EAA3B,EAA+BC,MAA/B,CAAsC,CAAtC,EAAyC,GAAzC,EAA8CC,IAA9C,EADJ,GAEI,IAHN;;AAIA,QAAIL,YAAJ,EAAkB;AAChB;AACAF,MAAAA,OAAO,CAACC,IAAR,CACG,8IAA6IC,YAAa,GAD7J;AAGD,KALD,MAKO;AACL;AACAF,MAAAA,OAAO,CAACC,IAAR,CACG,oIADH;AAGD;;AACDL,IAAAA,SAAS,CAACE,CAAD,CAAT;AACD;AACF","sourcesContent":["// @flow\nimport debugFactory from \"debug\";\n\nconst debugWarn = debugFactory(\"graphile-build:warn\");\n\nexport default function swallowError(e: Error): void {\n  // BE VERY CAREFUL NOT TO THROW!\n  // XXX: Improve this\n  if (debugWarn.enabled) {\n    // eslint-disable-next-line no-console\n    console.warn(`Recoverable error occurred:`);\n    debugWarn(e);\n  } else {\n    const errorSnippet =\n      e && typeof e.toString === \"function\"\n        ? String(e).replace(/\\n.*/g, \"\").substr(0, 320).trim()\n        : null;\n    if (errorSnippet) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Recoverable error occurred; use envvar 'DEBUG=\"graphile-build:warn\"' for full error (see: https://graphile.org/postgraphile/debugging )\\n> ${errorSnippet}â€¦`\n      );\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Recoverable error occurred; use envvar 'DEBUG=\"graphile-build:warn\"' for error (see: https://graphile.org/postgraphile/debugging )`\n      );\n    }\n    debugWarn(e);\n  }\n}\n"],"file":"swallowError.js"}